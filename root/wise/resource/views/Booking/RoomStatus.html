<span ng-include="'/resource/views/Common/nav.tpl.html'"></span>
<div class="app-content-inner" style="top:128px;" ng-controller="RoomStatusController">
  <div class="box">
    <div class="col-md-10">
      <div class="box b-r">
        <div class="p p-v-sm b-b">
          <script type="text/ng-template" id="label">
            <ul tabindex="-1" class="dropdown-menu" role="menu">
              <li><a >Sent</a></li>
              <li><a >Trash</a></li>
              <li><a >Work</a></li>
              <li><a >Project</a></li>
            </ul>
          </script>
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-xs btn-default"><i class="fa fa-fw fa-angle-left"></i></button>
            <button type="button" class="btn btn-xs btn-default"><i class="fa fa-fw fa-angle-right"></i></button>
          </div>
          <button type="button" class="btn btn-default icon fa fa-building text-lt" ng-model="param.channel_id" data-html="1" data-toggle="true" bs-options="channel.channel_id as channel.channel_name for channel in thisChannel" bs-select placeholder="{{defaultHotel}}" ng-change="selectChannel(param.channel_id)">
              Action <span class="caret"></span>
          </button>
        </div>
        <div class="box-row">
          <div class="box-cell">
            <div class="box-inner">
              <!-- detail -->
              <div class="p b-b tab-container ">
                <div class="btn-group m-b">
                    <span class="btn btn-xs btn-rounded bg-info">空净</span>
                    <span class="btn btn-xs bg-inverse">住净</span>
                    <span class="btn btn-xs bg-danger">住脏</span>
                    <span class="btn btn-xs bg-warning">维修</span>
                    <span class="btn btn-xs btn-rounded bg-dark">空脏</span>
                    
                </div>
                <ul class="nav nav-sm nav-tabs" ui-nav  ng-init="activeTab=1">
                    <li ng-class="{active:activeTab==1}" ng-click="activeTab=1">
                        <a>{{_self_module.module_name}}</a>
                    </li>
                    <li ng-class="{active:activeTab==2}" ng-click="activeTab=2">
                        <a>远期房态</a>
                    </li>
                    <li ng-class="{active:activeTab==3}" ng-click="activeTab=3">
                        <a>图片</a>
                    </li>
                    <li ng-class="{active:activeTab==4}" ng-click="activeTab=4;getRoomItem()">
                        <a>房间</a>
                    </li>
                 </ul>
                 <div class="tab-content"><!--<img class="img-responsive w-thumb-xs" ng-src="{{_resource}}images/room.png">-->
                    <div ng-show="activeTab==1">
                        <div class="form-group clearfix">
                            <div class="buliding clear m-b" ng-repeat="(buliding_key, buliding) in roomList">
                                <div class="m-b-xs"><i class="fa fa-building text-xs"> {{buliding_key}}楼栋</i></div>
                                <div class="floor clearfix" ng-repeat="(floor_key, floor) in buliding">
                                    <span class="badge badge-xs bg-success pos-rlt m-r-xs">{{floor_key}}楼层</span>
                                    <div class="list-group no-radius">
                                        <div class="list-group-item col-sm-2 m-xs" ng-repeat="(i, room) in floor">
                                          <span class="pull-left w-thumb-xs m-r b-b-2x"><i class="ui-icon ti-user"></i></span>
                                          <div class="clear">
                                            <span class="font-bold block">{{layoutList[layoutRoom[room.item_id].category_item_id].item_name}}
												<div>{{room.item_name}}</div> 
												<label class="checkbox-inline ui-checks pull-right">
													<input type="checkbox" id="item_room_{{room.item_id}}" ng-model="room[room.item_id]" ng-click="selectRoom($event, room.item_id);" value="{{room.item_id}}">
													<i></i>
												</label>
                                            </span> 
                                            
                                          </div>
                                        </div>
                                    </div> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-show="activeTab==2">
                        <div class="form-group m-h-n clearfix">2</div>
                    </div>
                    <div ng-show="activeTab==3">
                        <div class="form-group m-h-n clearfix">3</div>
                    </div>
                    <div ng-show="activeTab==4">
                        <div class="form-group m-h-n clearfix">4</div>
                    </div>
                 </div>
              </div>  
              
              
                   
              <div class="p-xs">   
                
                        
                
              </div>
              <!-- / detail -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="box">
        <div class="p p-v-sm b-b">
          <script type="text/ng-template" id="filter">
            <ul tabindex="-1" class="dropdown-menu" role="menu">
              <li><a >Read</a></li>
              <li><a >Unread</a></li>
            </ul>
          </script>
          <a href class="pull-right text-muted"><i class="fa fa-trash"></i></a>
          <a href class="btn btn-default btn-xs text-muted" bs-dropdown="dropdown" data-animation="am-flip-x" data-template="filter">
            Filter <span class="caret"></span>
          </a>
        </div>
        <!-- use box row -->
        <div class="box-row">
          <div class="box-cell scrollable hover">
            <div class="box-inner">
              <!-- mail list -->
              <div class="list-group list-group-md no-border no-radius no-margin">
                <div class="list-group-item">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a0.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      12:30 PM
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>David M.</div>
                    <a href class="text-md text-ellipsis">Easy Angular development with Yeoman</a>
                  </div>
                  <small class="text-muted">One of the best things to happen in web development over the past few years has been the variety of tools</small>
                </div>
                <div class="list-group-item select">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a1.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      10:34 PM 
                      <i class="fa fa-paperclip m-l-sm"></i>
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>Eric Dane</div>
                    <a href class="text-md text-ellipsis">This is a short and opinionated review of the AngularJS</a>
                  </div>
                  <small class="text-muted">AngularJS is what HTML would have been, designed for building web-apps.</small>
                </div>
                <div class="list-group-item">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a2.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      9:34 PM 
                      <i class="fa fa-paperclip m-l-sm"></i>
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>Ryan Gosling</div>
                    <a href class="text-md text-ellipsis">Correct the known issue</a>
                  </div>
                  <small class="text-muted">This is a known issue. Please set the correct node write permissions with sudo</small>
                </div>
                <div class="list-group-item">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a4.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      July 9
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>Richard Hammond</div>
                    <a href class="text-md text-ellipsis">Angular bootstrap</a>
                  </div>
                  <small class="text-muted">Native AngularJS (Angular) directives for Bootstrap. Small footprint</small>
                </div>
                <div class="list-group-item">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a5.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      March 10
                      <i class="fa fa-paperclip m-l-sm"></i>
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>Ossily</div>
                    <a href class="text-md text-ellipsis">Building an Angular App: Bootstrapping</a>
                  </div>
                  <small class="text-muted">Using angular.bootstrap to Initialize Your App</small>
                </div>
                <div class="list-group-item">
                  <a href class="w-thumb-md pull-left m-r"><img src="images/a6.jpg" class="img-responsive"></a>
                  <div class="clear m-b-sm">
                    <span class="pull-right text-muted text-xs">
                      Feb 8
                      <i class="fa fa-paperclip m-l-sm"></i>
                      <label class="ui-checks m-l-sm"><input type="checkbox"><i></i></label>
                    </span>
                    <div>Patrick</div>
                    <a href class="text-md text-ellipsis">AngularJS Documentation for bootstrap</a>
                  </div>
                  <small class="text-muted">Place ng-app to the root of your application</small>
                </div>
              </div>
              <!-- / mail list -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script language="javascript" src="/resource/vendor/libs/moment.min.js"></script>
<script language="javascript" src="/resource/vendor/libs/daterangepicker.js"></script>
<script language="javascript">
app.controller('RoomStatusController', function($rootScope, $scope, $httpService, $location, $translate, $aside, $alert) {
    $scope.param = {};
	//获取数据
	var _channel = $scope.$stateParams.channel;
	var _view = $scope.$stateParams.view,common = '';
	var param = 'channel='+_channel+'&view='+_view;
	var loading = $alert({content: 'Loading... 90%', placement: 'top', type: 'info', templateUrl: '/loading.html', show: true});
	$httpService.post('/app.do?'+param, $scope, function(result){
		loading.hide();
		if(result.data.success == '0') {
			var message = $scope.getErrorByCode(result.data.code);
			$alert({title: 'Error', content: message, templateUrl: '/modal-warning.html', show: true});
		}
		common = result.data.common;
		$scope.setCommonSetting(common);
		$scope.setThisChannel('Hotel');
        $(document).ready(function(){
            $scope.param["channel_id"] = $rootScope.defaultChannel["channel_id"];
            $scope.param["channel_father_id"] = $rootScope.defaultChannel["channel_father_id"];
            $scope.defaultHotel = $rootScope.defaultChannel["channel_name"];
        });
        $scope.roomList   = result.data.item.roomList;
        $scope.layoutList = result.data.item.layoutList;
		$scope.layoutRoom = result.data.item.layoutRoom;
		$scope.bookList   = result.data.item.bookList;
        if($scope.bookList != '') {
            
        }
		
	});
	//
	$httpService.deleteHeader('refresh');
});

</script>
